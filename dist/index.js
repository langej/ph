var xs=Symbol.for("preact-signals");function R(){if(!(N>1)){var s,o=!1;while(_!==void 0){var n=_;_=void 0,Q++;while(n!==void 0){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&is(n))try{n.c()}catch(t){if(!o)s=t,o=!0}n=r}}if(Q=0,N--,o)throw s}else N--}var i=void 0;var _=void 0,N=0,Q=0,X=0;function fs(s){if(i!==void 0){var o=s.n;if(o===void 0||o.t!==i){if(o={i:0,S:s,p:i.s,n:void 0,t:i,e:void 0,x:void 0,r:o},i.s!==void 0)i.s.n=o;if(i.s=o,s.n=o,32&i.f)s.S(o);return o}else if(o.i===-1){if(o.i=0,o.n!==void 0){if(o.n.p=o.p,o.p!==void 0)o.p.n=o.n;o.p=i.s,o.n=void 0,i.s.n=o,i.s=o}return o}}}function A(s){this.v=s,this.i=0,this.n=void 0,this.t=void 0}A.prototype.brand=xs;A.prototype.h=function(){return!0};A.prototype.S=function(s){if(this.t!==s&&s.e===void 0){if(s.x=this.t,this.t!==void 0)this.t.e=s;this.t=s}};A.prototype.U=function(s){if(this.t!==void 0){var{e:o,x:n}=s;if(o!==void 0)o.x=n,s.e=void 0;if(n!==void 0)n.e=o,s.x=void 0;if(s===this.t)this.t=n}};A.prototype.subscribe=function(s){var o=this;return T(function(){var n=o.value,r=i;i=void 0;try{s(n)}finally{i=r}})};A.prototype.valueOf=function(){return this.value};A.prototype.toString=function(){return this.value+""};A.prototype.toJSON=function(){return this.value};A.prototype.peek=function(){var s=i;i=void 0;try{return this.value}finally{i=s}};Object.defineProperty(A.prototype,"value",{get:function(){var s=fs(this);if(s!==void 0)s.i=this.i;return this.v},set:function(s){if(s!==this.v){if(Q>100)throw new Error("Cycle detected");this.v=s,this.i++,X++,N++;try{for(var o=this.t;o!==void 0;o=o.x)o.t.N()}finally{R()}}}});function E(s){return new A(s)}function is(s){for(var o=s.s;o!==void 0;o=o.n)if(o.S.i!==o.i||!o.S.h()||o.S.i!==o.i)return!0;return!1}function ps(s){for(var o=s.s;o!==void 0;o=o.n){var n=o.S.n;if(n!==void 0)o.r=n;if(o.S.n=o,o.i=-1,o.n===void 0){s.s=o;break}}}function gs(s){var o=s.s,n=void 0;while(o!==void 0){var r=o.p;if(o.i===-1){if(o.S.U(o),r!==void 0)r.n=o.n;if(o.n!==void 0)o.n.p=r}else n=o;if(o.S.n=o.r,o.r!==void 0)o.r=void 0;o=r}s.s=n}function k(s){A.call(this,void 0),this.x=s,this.s=void 0,this.g=X-1,this.f=4}(k.prototype=new A).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32)return!0;if(this.f&=-5,this.g===X)return!0;if(this.g=X,this.f|=1,this.i>0&&!is(this))return this.f&=-2,!0;var s=i;try{ps(this),i=this;var o=this.x();if(16&this.f||this.v!==o||this.i===0)this.v=o,this.f&=-17,this.i++}catch(n){this.v=n,this.f|=16,this.i++}return i=s,gs(this),this.f&=-2,!0};k.prototype.S=function(s){if(this.t===void 0){this.f|=36;for(var o=this.s;o!==void 0;o=o.n)o.S.S(o)}A.prototype.S.call(this,s)};k.prototype.U=function(s){if(this.t!==void 0){if(A.prototype.U.call(this,s),this.t===void 0){this.f&=-33;for(var o=this.s;o!==void 0;o=o.n)o.S.U(o)}}};k.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var s=this.t;s!==void 0;s=s.x)s.t.N()}};Object.defineProperty(k.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var s=fs(this);if(this.h(),s!==void 0)s.i=this.i;if(16&this.f)throw this.v;return this.v}});function as(s){return new k(s)}function Ts(s){var o=s.u;if(s.u=void 0,typeof o=="function"){N++;var n=i;i=void 0;try{o()}catch(r){throw s.f&=-2,s.f|=8,U(s),r}finally{i=n,R()}}}function U(s){for(var o=s.s;o!==void 0;o=o.n)o.S.U(o);s.x=void 0,s.s=void 0,Ts(s)}function ds(s){if(i!==this)throw new Error("Out-of-order effect");if(gs(this),i=s,this.f&=-2,8&this.f)U(this);R()}function L(s){this.x=s,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}L.prototype.c=function(){var s=this.S();try{if(8&this.f)return;if(this.x===void 0)return;var o=this.x();if(typeof o=="function")this.u=o}finally{s()}};L.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Ts(this),ps(this),N++;var s=i;return i=this,ds.bind(this,s)};L.prototype.N=function(){if(!(2&this.f))this.f|=2,this.o=_,_=this};L.prototype.d=function(){if(this.f|=8,!(1&this.f))U(this)};function T(s){var o=new L(s);try{o.c()}catch(n){throw o.d(),n}return o.d.bind(o)}class g extends HTMLElement{log(...s){let o=this.id?` #${this.id}`:"",n=this.getAttribute("name")?` :${this.getAttribute("name")}`:"";console.log(`[${this.tagName}${n}${o}]`,...s)}mount(){}unmount(){}connectedCallback(){this.mount()}disconnectedCallback(){this.unmount()}on(s,o){return this.addEventListener(s,o)}getHost(){let s=this.getRootNode();return s.host??s}emit(s,o){let n=!o?new Event(s):new CustomEvent(s,{detail:o});this.dispatchEvent(n)}}var Os=(s,o)=>s.replace(/{{[^{}]*}}/g,(n)=>o(n.replace(/[{}]/g,""))),hs=document.createTreeWalker.bind(document),C=(s,o)=>!customElements.get(s)&&customElements.define(s,o),q=(s,o)=>{return Os(s,(n)=>{let r=n.replace(/[{}]/g," ");if(o)r=o(r);return`<ph-slot value="${r}"></ph-slot>`})},v=(s,o)=>{return Function("context","computed",`with(context){return computed(() => ${o})}`)(s,as)},d=(s,o,n="")=>{let r=o??"",t=o?.includes("await");return Function("context",`return ${t?"async":""} function(${n}){with (context) {${r}}}`)(s)},m=(s)=>{return hs(s,NodeFilter.SHOW_ELEMENT,(o)=>o.tagName!=="TEMPLATE"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT)},G=(s,o)=>{return hs(s,NodeFilter.SHOW_ELEMENT,o)};var ys=({value:s,context:o})=>{return d(o,`return ${s}`)()},J=(s)=>{let o=s.getHost()?.[c],n=s.getAttribute("name"),r=s.getAttribute("value");return{context:o,name:n,value:r}},c=Symbol(),z=Symbol(),bs=Symbol(),vs=Symbol(),H=Symbol();class W{static from(s){if(s instanceof W){let o=Object.create(s);return Object.defineProperty(o,"slots",{value:{default:E([])}}),o}return new W}slots={default:E([])};[z](s,o){Object.defineProperty(this,s,{get(){return o.value},set(n){o.value=n}})}[bs](s,o){Object.defineProperty(this,s,{get(){return o.value}})}[vs](s,o){Object.defineProperty(this,s,{value:o})}[H](s,o){Object.defineProperty(this,s,{value:o,writable:!1})}}class Y extends g{mount(){let{context:s,name:o,value:n}=J(this);if(o&&n&&s){let r=ys({value:n,context:s});s[z](o,E(r))}this.remove()}}class Z extends g{mount(){let{context:s,name:o,value:n}=J(this);if(o&&n&&s){let r=v(s,n);s[bs](o,r)}this.remove()}}class I extends g{mount(){let{context:s,name:o,value:n}=J(this);if(o&&n&&s){let r=ys({value:n,context:s});s[H](o,r)}this.remove()}}class F extends g{mount(){this.style.display="none";let{context:s,name:o}=J(this),n=this.firstElementChild,t=n.getAttribute("args")?.split(",")?.map((f)=>{let[u,p]=f.split(":").map((h)=>h.trim());return{name:u,type:p}})?.map((f)=>f.name).join(","),e=n?.textContent.replace(/&gt;/g,">").replace(/&lt;/g,"<").trim()??"";if(s&&e){let f=d(s,e,t);s[vs](o,f)}else{if(!s)this.log("no context provided!");if(!e)this.log("no body provided!")}this.remove()}}class w extends g{#s;mount(){setTimeout(()=>{this.style.display="contents";let s=this.getAttribute("value"),o=this.getHost()?.[c];if(s&&o){let n=v(o,s);this.#s=T(()=>{this.innerHTML=n.value})}})}unmount(){this.#s?.()}}function K(s){let o=G(s);while(o.nextNode())V(o.currentNode)}function D(s,o){let n=[],r=m(s);while(r.nextNode()){let t=r.currentNode;n.push(...j(t,o))}return n}function V(s){for(let o of s.getAttributeNames()){let n=o,r=As[n.slice(0,3)]?.(n)??As[n[0]]?.(n);if(r)s.setAttribute(r,s.getAttribute(n)),s.removeAttribute(n)}}var O={"bind:":"bind:","bool:":"bool:","on:":"on:","prop:":"prop:","spread:":"spread:"},As={"...":(s)=>s.replace("...","spread:"),"@":(s)=>s.replace("@","on:"),".":(s)=>s.replace(".","prop:"),"?":(s)=>s.replace("?","bool:"),":":(s)=>s.replace(":","bind:")};function j(s,o){let n=[],r=s.getAttributeNames();for(let t of r){let e=s.getAttribute(t);if(e&&e!==""){if(t.startsWith(O["on:"])){let u=t.replace(O["on:"],""),p=d(o,e,"$e");setTimeout(()=>{s.addEventListener(u,p)}),s.removeAttribute(t)}if(t.startsWith(O["bind:"])){let u=v(o,e),p=t.replace(O["bind:"],"");n.push(T(()=>{if(u.value!==void 0&&u.value!==null)s.setAttribute(p,u.value);else s.removeAttribute(p)})),s.removeAttribute(t)}if(t.startsWith(O["prop:"])){let u=t.replace(O["prop:"],""),p=v(o,e),h=s[c]??s;n.push(T(()=>{h[u]=p.value})),s.removeAttribute(t)}if(t.startsWith(O["spread:"])){let u=v(o,e);if(typeof u.value==="object")n.push(T(()=>{for(let[p,h]of Object.entries(u.value))s.dataset[p]=h})),s.removeAttribute(t);else throw Error(`the value of "${e}" is no object`);s.removeAttribute(t)}if(t.startsWith(O["bool:"])){let u=t.replace(O["bool:"],""),p=v(o,e);n.push(T(()=>{if(p.value)s.toggleAttribute(u,!0);else s.toggleAttribute(u,!1)})),s.removeAttribute(t)}if(t==="ref"){let u=e;o[H](u,s),s.removeAttribute(t)}}}return n}var $s=(s,o,n,r,t)=>{let e=s,f=(a)=>new RegExp(`([^a-zA-Z0-9$_]${a}[^a-zA-Z0-9$_:])`,"g"),u=(a)=>{let y=a.replace(f(n),(b)=>`${b[0]}${o}[${r}]?.valueOf()${b.at(-1)}`);if(t)return y.replace(f(t),(b)=>`${b[0]}${r}${b.at(-1)}`);return y},p=q(e.innerHTML,u);e.innerHTML=p;let h=(a)=>{for(let y of a.getAttributeNames())if(Object.keys(O).some((b)=>y.startsWith(b)))a.setAttribute(y,u(` ${a.getAttribute(y)} `))};h(e);let $=G(e);while($.nextNode()){let a=$.currentNode;h(a);let y=a.tagName;if(a.hasAttribute("value")&&(y==="PH-IF"||y==="PH-EITHER"||y==="PH-SHOW"||y==="PH-SLOT"))a.setAttribute("value",u(` ${a.getAttribute("value")} `))}return e};class P extends g{mount(){this.style.display="contents";let s=this.firstElementChild;if(s?.tagName==="TEMPLATE")s.setAttribute("each",this.getAttribute("each")),P.fromTemplate(s);else throw Error("no template element provided")}static fromTemplate(s){K(s.content);let o=s.getAttribute("each"),[n,r]=o?.split(" in ")??[],[t,e]=n.split(",").map((h)=>h.trim()),f=s.getRootNode(),u=(f.host??f)[c],p=s.parentElement;if(u&&t&&r&&s){let h=v(u,r),$=0;T(()=>{let a=h.value.length;if(a!==$){if(a>$){let y=$;h.value.slice(y).forEach((b,B)=>{let x=s.content.firstElementChild.cloneNode(!0),S=$s(x,r,t,B+y,e),M=D(S,u);M.push(...j(S,u)),S.disposes=M,p.append(S)})}else{let y=Array.from(p.children).slice(a-$);for(let b of y){for(let B of b.disposes)B();b.remove()}p.remove}$=h.value.length}})}s.remove()}}var l=(s)=>s.replace(/-[a-z]/g,(o)=>o[1].toUpperCase());class ss extends g{mount(){let s=this.firstElementChild;if(s?.tagName==="TEMPLATE")Ds(s);else throw Error("no template element provided")}}function Ds(s){let o=s.getAttribute("tag"),n=s.getAttribute("open"),r=s.getAttribute("closed");if(!o)throw Error("no tag attribute was provided");let t=[];for(let f of s.content.querySelectorAll("attribute")){let u=f.getAttribute("name");if(u!=="null")t.push(u),f.remove()}let e=class extends g{#s;#o;#n=[];#r;get[c](){return this.#o}static observedAttributes=t;attributeChangedCallback(f,u,p){let h=l(f);if(this[c]&&u!==p)this[c][h]=p}constructor(){super();let f=r!==null?"closed":"open";this.#s=this.attachShadow({mode:f})}async mount(){if(!this[c]){let x=this.getHost()?.[c];this.#o=W.from(x),this[c][H]("self",this)}for(let x of t){let S=l(x);this[c][z](S,E(this.getAttribute(x))),this.#n.push(T(()=>{let M=this[c][S];if(M!==void 0&&M!==null)this.setAttribute(x,M);else this.removeAttribute(x)}))}let f=s.cloneNode(!0).content;K(f);let u=f.querySelector("script[on-mount]"),p=f.querySelector("script[on-remove]"),h=f.querySelectorAll("script[watch]"),$=u?d(this[c],u.textContent):void 0,a=p?d(this[c],p.textContent):void 0,y=Array.from(h).map((x)=>{let S=d(this[c],x.textContent);return x.remove(),S});this.#r=a,u?.remove(),p?.remove(),ns(f);let b=this.#s;b.append(f),Ws(this.#s,this[c]),os(b),await Ss(b,this[c]),await $?.();let B=D(b,this[c]);this.#n.push(...B),Object.freeze(this[c]);for(let x of y)this.#n.push(T(()=>{x()}));Hs(b)}unmount(){this.#r?.();for(let f of this.#n)f()}};C(o,e)}function os(s){for(let o of s.querySelectorAll("template[each]"))P.fromTemplate(o)}function ns(s){let o=m(s);while(o.nextNode()){let n=o.currentNode;n.innerHTML=q(n.innerHTML)}}async function Ss(s,o){await Promise.all(Array.from(s.querySelectorAll("import[src]")).map(async(n)=>{let t=await import(n.getAttribute("src"));for(let e of n.getAttributeNames()){let f=n.getAttribute(e),u=t[l(e)];if(u)o[H](f,u)}return}))}function Ws(s,o){let n=s.querySelector("slot"),r=s.querySelectorAll("slot[name]");for(let t of r){let e=t.getAttribute("name");o.slots[e]=E([])}s.onslotchange=()=>{o.slots.default.value=n?.assignedElements();for(let t of r){let e=t.getAttribute("name");if(o.slots)o.slots[e].value=t.assignedElements()}}}var Es=(()=>{let s=null;return()=>{if(s===null)s=document.querySelector("style[global]");return s}})();function Hs(s){let o=s.querySelector("style"),n=new CSSStyleSheet,r=new CSSStyleSheet,t=new CSSStyleSheet;if(!o?.hasAttribute("isolated"))n.replaceSync(Es()?.innerHTML??"");r.replaceSync(":host { display: inline-block; position: relative }"),t.replaceSync(o?.textContent??""),o?.remove(),s.adoptedStyleSheets.push(n,r,t)}class rs extends g{#s=[];#o;mount(){this.#o=this.childNodes,this.style.display="inline flow";let s=this.getAttribute("value"),o=this.getHost()?.[c];if(s&&o){let n=v(o,s);this.#s.push(...D(this,o)),this.#s.push(...j(this,o)),this.#s.push(T(()=>{if(n.value===!0)this.append(...this.#o);else this.#o=Array.from(this.childNodes).map((t)=>this.removeChild(t))}))}}unmount(){for(let s of this.#s)s()}}class ts extends g{#s;mount(){this.style.display="inline flow";let s=this.getAttribute("value"),o=this.getHost()?.[c];if(s&&o){let n=v(o,s);this.#s=T(()=>{if(n.value)this.style.display="inline flow";else this.style.display="none"})}}unmount(){this.#s?.()}}class us extends g{#s=[];#o;#n;mount(){this.style.display="inline flow";let s=this.getAttribute("value"),o=this.getHost()?.[c];if(s&&o){this.#s.push(...D(this,o)),this.#s.push(...j(this,o));let[n,r]=this.children;this.#o=n,this.#n=r,this.innerHTML="";let t=v(o,s);this.#s.push(T(()=>{if(t.value===!0){if(this.firstChild)this.#n=this.removeChild(this.firstChild);this.append(this.#o)}else{if(this.firstChild)this.#o=this.removeChild(this.firstChild);this.append(this.#n)}}))}}unmount(){for(let s of this.#s)s()}}class cs extends g{mount(){let s=this.getAttribute("is"),o=this.getHost()?.[c];if(s&&o)setTimeout(()=>{this.replaceWith(o[s].value)})}}class es extends g{#s;get context(){return this.#s}mount(){this.style.display="none";let s=this.attachShadow({mode:"open"}),o=document[c];this.#s=new W;let n=this.getAttribute("name"),r,t=this.querySelector("template");for(let e of t.content.querySelectorAll("script"))if(e.setAttribute("type","javascript/blocked"),e.hasAttribute("on-mount"))r=d(this.#s,e.textContent);if(s.append(t.cloneNode(!0).content),!o.$store)o.$store={};o.$store[n]=this.#s,r?.()}}var Cs=()=>{console.group("ph init"),!document[c]&&Object.defineProperty(document,c,{value:new W,writable:!1}),C("ph-signal",Y),C("ph-computed",Z),C("ph-const",I),C("ph-method",F),C("ph-for",P),C("ph-either",us),C("ph-show",ts),C("ph-if",rs),C("ph-slot",w),C("ph-dynamic",cs),C("ph-component",ss),C("ph-store",es);let s=m(document.body);while(s.nextNode()){let o=s.currentNode;V(o)}ns(document.body),D(document.body,document[c]),os(document.body),console.groupEnd()};window.init=Cs;document.addEventListener("DOMContentLoaded",()=>{Cs()});
