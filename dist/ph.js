var Ss=Symbol.for("preact-signals");function Q(){if(!(B>1)){var s,r=!1;while(L!==void 0){var t=L;L=void 0,K++;while(t!==void 0){var o=t.o;if(t.o=void 0,t.f&=-3,!(8&t.f)&&gs(t))try{t.c()}catch(n){if(!r)s=n,r=!0}t=o}}if(K=0,B--,r)throw s}else B--}var f=void 0;var L=void 0,B=0,K=0,J=0;function is(s){if(f!==void 0){var r=s.n;if(r===void 0||r.t!==f){if(r={i:0,S:s,p:f.s,n:void 0,t:f,e:void 0,x:void 0,r},f.s!==void 0)f.s.n=r;if(f.s=r,s.n=r,32&f.f)s.S(r);return r}else if(r.i===-1){if(r.i=0,r.n!==void 0){if(r.n.p=r.p,r.p!==void 0)r.p.n=r.n;r.p=f.s,r.n=void 0,f.s.n=r,f.s=r}return r}}}function A(s){this.v=s,this.i=0,this.n=void 0,this.t=void 0}A.prototype.brand=Ss;A.prototype.h=function(){return!0};A.prototype.S=function(s){if(this.t!==s&&s.e===void 0){if(s.x=this.t,this.t!==void 0)this.t.e=s;this.t=s}};A.prototype.U=function(s){if(this.t!==void 0){var{e:r,x:t}=s;if(r!==void 0)r.x=t,s.e=void 0;if(t!==void 0)t.e=r,s.x=void 0;if(s===this.t)this.t=t}};A.prototype.subscribe=function(s){var r=this;return T(function(){var t=r.value,o=f;f=void 0;try{s(t)}finally{f=o}})};A.prototype.valueOf=function(){return this.value};A.prototype.toString=function(){return this.value+""};A.prototype.toJSON=function(){return this.value};A.prototype.peek=function(){var s=f;f=void 0;try{return this.value}finally{f=s}};Object.defineProperty(A.prototype,"value",{get:function(){var s=is(this);if(s!==void 0)s.i=this.i;return this.v},set:function(s){if(s!==this.v){if(K>100)throw new Error("Cycle detected");this.v=s,this.i++,J++,B++;try{for(var r=this.t;r!==void 0;r=r.x)r.t.N()}finally{Q()}}}});function H(s){return new A(s)}function gs(s){for(var r=s.s;r!==void 0;r=r.n)if(r.S.i!==r.i||!r.S.h()||r.S.i!==r.i)return!0;return!1}function ps(s){for(var r=s.s;r!==void 0;r=r.n){var t=r.S.n;if(t!==void 0)r.r=t;if(r.S.n=r,r.i=-1,r.n===void 0){s.s=r;break}}}function as(s){var r=s.s,t=void 0;while(r!==void 0){var o=r.p;if(r.i===-1){if(r.S.U(r),o!==void 0)o.n=r.n;if(r.n!==void 0)r.n.p=o}else t=r;if(r.S.n=r.r,r.r!==void 0)r.r=void 0;r=o}s.s=t}function N(s){A.call(this,void 0),this.x=s,this.s=void 0,this.g=J-1,this.f=4}(N.prototype=new A).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32)return!0;if(this.f&=-5,this.g===J)return!0;if(this.g=J,this.f|=1,this.i>0&&!gs(this))return this.f&=-2,!0;var s=f;try{ps(this),f=this;var r=this.x();if(16&this.f||this.v!==r||this.i===0)this.v=r,this.f&=-17,this.i++}catch(t){this.v=t,this.f|=16,this.i++}return f=s,as(this),this.f&=-2,!0};N.prototype.S=function(s){if(this.t===void 0){this.f|=36;for(var r=this.s;r!==void 0;r=r.n)r.S.S(r)}A.prototype.S.call(this,s)};N.prototype.U=function(s){if(this.t!==void 0){if(A.prototype.U.call(this,s),this.t===void 0){this.f&=-33;for(var r=this.s;r!==void 0;r=r.n)r.S.U(r)}}};N.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var s=this.t;s!==void 0;s=s.x)s.t.N()}};Object.defineProperty(N.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var s=is(this);if(this.h(),s!==void 0)s.i=this.i;if(16&this.f)throw this.v;return this.v}});function Ts(s){return new N(s)}function hs(s){var r=s.u;if(s.u=void 0,typeof r=="function"){B++;var t=f;f=void 0;try{r()}catch(o){throw s.f&=-2,s.f|=8,R(s),o}finally{f=t,Q()}}}function R(s){for(var r=s.s;r!==void 0;r=r.n)r.S.U(r);s.x=void 0,s.s=void 0,hs(s)}function Os(s){if(f!==this)throw new Error("Out-of-order effect");if(as(this),f=s,this.f&=-2,8&this.f)R(this);Q()}function X(s){this.x=s,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}X.prototype.c=function(){var s=this.S();try{if(8&this.f)return;if(this.x===void 0)return;var r=this.x();if(typeof r=="function")this.u=r}finally{s()}};X.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,hs(this),ps(this),B++;var s=f;return f=this,Os.bind(this,s)};X.prototype.N=function(){if(!(2&this.f))this.f|=2,this.o=L,L=this};X.prototype.d=function(){if(this.f|=8,!(1&this.f))R(this)};function T(s){var r=new X(s);try{r.c()}catch(t){throw r.d(),t}return r.d.bind(r)}class i extends HTMLElement{log(...s){let r=this.id?` #${this.id}`:"",t=this.getAttribute("name")?` :${this.getAttribute("name")}`:"";console.log(`[${this.tagName}${t}${r}]`,...s)}mount(){}unmount(){}connectedCallback(){this.mount()}disconnectedCallback(){this.unmount()}on(s,r){return this.addEventListener(s,r)}getHost(){let s=this.getRootNode();return s.host??s}emit(s,r){let t=!r?new Event(s):new CustomEvent(s,{detail:r});this.dispatchEvent(t)}}var ds=(s,r)=>s.replace(/{{[^{}]*}}/g,(t)=>r(t.replace(/[{}]/g,""))),ys=document.createTreeWalker.bind(document),C=(s,r)=>!customElements.get(s)&&customElements.define(s,r),q=(s,r)=>{return ds(s,(t)=>{let o=t.replace(/[{}]/g," ");if(r)o=r(o);return`<ph-slot value="${o}"></ph-slot>`})},b=(s,r)=>{return Function("context","computed",`with(context){return computed(() => ${r})}`)(s,Ts)},S=(s,r,t="")=>{let o=r??"",n=r?.includes("await");return Function("context",`return ${n?"async":""} function(${t}){with (context) {${o}}}`)(s)},P=(s)=>{return ys(s,NodeFilter.SHOW_ELEMENT,(r)=>r.tagName!=="TEMPLATE"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT)},G=(s,r)=>{return ys(s,NodeFilter.SHOW_ELEMENT,r)};var bs=({value:s,context:r})=>{try{return S(r,`return ${s}`)()}catch(t){console.error(t)}},m=(s)=>{let r=s.getHost()?.[e],t=s.getAttribute("name"),o=s.getAttribute("value");return{context:r,name:t,value:o}},$s=(s,r,t)=>{if(s!==null){let o=s?s+"/":"",n=o+r,u=localStorage.getItem(n);if(u)t[r]=JSON.parse(u);T(()=>{localStorage.setItem(n,JSON.stringify(t[r]))})}},e=Symbol(),z=Symbol(),vs=Symbol(),As=Symbol(),j=Symbol();class E{static from(s){if(s instanceof E){let r=Object.create(s);return Object.defineProperty(r,"slots",{value:{default:H([])}}),r}return new E}slots={default:H([])};[z](s,r){Object.defineProperty(this,s,{get(){return r.value},set(t){r.value=t}})}[vs](s,r){Object.defineProperty(this,s,{get(){return r.value}})}[As](s,r){Object.defineProperty(this,s,{value:r})}[j](s,r){Object.defineProperty(this,s,{value:r,writable:!1})}}class U extends i{mount(){let{name:s,value:r,context:t}=m(this);if(s&&r&&t){let o=bs({value:r,context:t}),n=this.getAttribute("local-storage");t[z](s,H(o)),$s(n,s,t)}this.remove()}}class Y extends i{mount(){let{name:s,value:r,context:t}=m(this);if(s&&r&&t){let o=b(t,r);t[vs](s,o)}this.remove()}}class Z extends i{mount(){let{name:s,value:r,context:t}=m(this);if(s&&r&&t){let o=bs({value:r,context:t});t[j](s,o)}this.remove()}}class F extends i{mount(){this.style.display="none";let{context:s,name:r}=m(this),t=this.firstElementChild,o=t?.textContent.replace(/&gt;/g,">").replace(/&lt;/g,"<").trim()??"",n=t.getAttribute("args")?.split(",")?.map((g)=>{let[c,p]=g.split(":").map((x)=>x.trim());return{name:c,type:p}}),u=n?.map((g)=>g.name).join(",");if(s&&o){let g=S(s,o,u);s[As](r,g)}else{if(!s)this.log("no context provided!");if(!o)this.log("no body provided!")}this.remove()}}class V extends i{#s;mount(){setTimeout(()=>{this.style.display="contents";let s=this.getAttribute("value"),r=this.getHost()?.[e];if(s&&r){let t=b(r,s);this.#s=T(()=>{this.innerHTML=t.value})}})}unmount(){this.#s?.()}}function I(s){let r=G(s);while(r.nextNode())w(r.currentNode)}function $(s,r){let t=[],o=P(s);while(o.nextNode()){let n=o.currentNode;t.push(...k(n,r))}return t}function w(s){for(let r of s.getAttributeNames()){let t=r,o=Cs[t.slice(0,3)]?.(t)??Cs[t[0]]?.(t);if(o)s.setAttribute(o,s.getAttribute(t)),s.removeAttribute(t)}}var O={"bind:":"bind:","bool:":"bool:","on:":"on:","prop:":"prop:","spread:":"spread:"},Cs={"...":(s)=>s.replace("...","spread:"),"@":(s)=>s.replace("@","on:"),".":(s)=>s.replace(".","prop:"),"?":(s)=>s.replace("?","bool:"),":":(s)=>s.replace(":","bind:")};function k(s,r){let t=[],o=s.getAttributeNames();for(let n of o){let u=s.getAttribute(n);if(u&&u!==""){if(n.startsWith(O["on:"])){let c=n.replace(O["on:"],""),p=S(r,u,"$e");setTimeout(()=>{s.addEventListener(c,p)}),s.removeAttribute(n)}if(n.startsWith(O["bind:"])){let c=b(r,u),p=n.replace(O["bind:"],"");t.push(T(()=>{if(c.value!==void 0&&c.value!==null)s.setAttribute(p,c.value);else s.removeAttribute(p)})),s.removeAttribute(n)}if(n.startsWith(O["prop:"])){let c=n.replace(O["prop:"],""),p=b(r,u),x=s[e]??s;t.push(T(()=>{x[c]=p.value})),s.removeAttribute(n)}if(n.startsWith(O["spread:"])){let c=b(r,u);if(typeof c.value==="object")t.push(T(()=>{for(let[p,x]of Object.entries(c.value))s.dataset[p]=x})),s.removeAttribute(n);else throw Error(`the value of "${u}" is no object`);s.removeAttribute(n)}if(n.startsWith(O["bool:"])){let c=n.replace(O["bool:"],""),p=b(r,u);t.push(T(()=>{if(p.value)s.toggleAttribute(c,!0);else s.toggleAttribute(c,!1)})),s.removeAttribute(n)}if(n==="ref"){let c=u;r[j](c,s),s.removeAttribute(n)}}}return t}var Ds=(s,r,t,o,n)=>{let u=s,g=(h)=>new RegExp(`([^a-zA-Z0-9$_]${h}[^a-zA-Z0-9$_:])`,"g"),c=(h)=>{let a=h.replace(g(t),(v)=>`${v[0]}${r}[${o}]?.valueOf()${v.at(-1)}`);if(n)return a.replace(g(n),(v)=>`${v[0]}${o}${v.at(-1)}`);return a},p=(h)=>{for(let a of h.getAttributeNames())if(Object.keys(O).some((v)=>a.startsWith(v)))h.setAttribute(a,c(` ${h.getAttribute(a)} `))},x=q(u.innerHTML,c);u.innerHTML=x,p(u);let d=G(u);while(d.nextNode()){let h=d.currentNode,a=h.tagName;if(p(h),h.hasAttribute("value")&&(a==="PH-IF"||a==="PH-EITHER"||a==="PH-SHOW"||a==="PH-SLOT"))h.setAttribute("value",c(` ${h.getAttribute("value")} `))}return u};class _ extends i{mount(){this.style.display="contents";let s=this.firstElementChild;if(s?.tagName==="TEMPLATE")s.setAttribute("each",this.getAttribute("each")),_.fromTemplate(s);else throw Error("no template element provided")}static fromTemplate(s){I(s.content),s.before(document.createComment("ph-for begin")),s.after(document.createComment("ph-for end"));let r=s.getAttribute("each"),t=s.previousSibling,o=s.nextSibling,n=s.getRootNode(),u=(n.host??n)[e],[g,c]=r?.split(" in ")??[],[p,x]=g.split(",").map((d)=>d.trim());if(u&&p&&c&&s){let d=b(u,c),h=0;T(()=>{let a=d.value.length;if(a!==h){if(a>h){let v=h;d.value.slice(v).forEach((y,D)=>{let W=s.content.firstElementChild.cloneNode(!0),M=Ds(W,c,p,D+v,x),fs=$(M,u);fs.push(...k(M,u)),M.disposes=fs,o.before(M)})}else{let v=[],y=t.nextSibling,D=0;while(y&&y!==o){if(D>=a)v.push(y);D++,y=y.nextSibling}for(let W of v)W.disposes?.forEach((M)=>M()),W.remove?.()}h=d.value.length}})}s.remove()}}var l=(s)=>s.replace(/-[a-z]/g,(r)=>r[1].toUpperCase()),Es=async(s,r)=>{let t=s.querySelector("slot"),o=s.querySelectorAll("slot[name]");for(let n of o){let u=n.getAttribute("name");r.slots[u]=H([])}s.onslotchange=()=>{r.slots.default.value=t?.assignedElements();for(let n of o){let u=n.getAttribute("name");if(r.slots)r.slots[u].value=n.assignedElements()}}},Ws=(()=>{let s=null;return()=>{if(s===null)s=document.querySelector("style[global]");return s}})(),Hs=(s)=>{let r=s.querySelector("style"),t=new CSSStyleSheet,o=new CSSStyleSheet,n=new CSSStyleSheet;if(!r?.hasAttribute("isolated"))t.replaceSync(Ws()?.innerHTML??"");o.replaceSync(":host { display: inline-block; position: relative }"),n.replaceSync(r?.textContent??""),r?.remove(),s.adoptedStyleSheets.push(t,o,n)};class ss extends i{mount(){let s=this.firstElementChild;if(s?.tagName==="TEMPLATE")js(s);else throw Error("no template element provided")}}var js=(s)=>{let r=s.getAttribute("tag"),t=s.getAttribute("closed"),o=[];if(!r)throw Error("no tag attribute was provided");for(let u of s.content.querySelectorAll("attribute")){let g=u.getAttribute("name");if(g!=="null")o.push(g),u.remove()}let n=class extends i{#s;#r=[];#t;#o;get[e](){return this.#o}static observedAttributes=o;attributeChangedCallback(u,g,c){let p=l(u);if(this[e]&&g!==c)this[e][p]=c}constructor(){super();let u=t!==null?"closed":"open";this.#s=this.attachShadow({mode:u})}async mount(){if(!this[e]){let y=this.getHost()?.[e];this.#o=E.from(y),this[e][j]("self",this)}for(let y of o){let D=l(y);this[e][z](D,H(this.getAttribute(y))),this.#r.push(T(()=>{let W=this[e][D];if(W!==void 0&&W!==null)this.setAttribute(y,W);else this.removeAttribute(y)}))}let u=s.cloneNode(!0).content;I(u);let g=u.querySelector("script[on-mount]"),c=u.querySelector("script[on-remove]"),p=u.querySelectorAll("script[watch]"),x=g?S(this[e],g.textContent):void 0,d=c?S(this[e],c.textContent):void 0,h=Array.from(p).map((y)=>{let D=S(this[e],y.textContent);return y.remove(),D});this.#t=d,g?.remove(),c?.remove(),ts(u);let a=this.#s;a.append(u),Es(this.#s,this[e]),rs(a),await ks(a,this[e]),await x?.();let v=$(a,this[e]);this.#r.push(...v),Object.freeze(this[e]);for(let y of h)this.#r.push(T(()=>{y()}));Hs(a)}unmount(){this.#t?.();for(let u of this.#r)u()}};C(r,n)},rs=(s)=>{for(let r of s.querySelectorAll("template[each]"))_.fromTemplate(r)},ts=(s)=>{let r=P(s);while(r.nextNode()){let t=r.currentNode;t.innerHTML=q(t.innerHTML)}},ks=async(s,r)=>{await Promise.all(Array.from(s.querySelectorAll("import[src]")).map(async(t)=>{let n=await import(t.getAttribute("src"));for(let u of t.getAttributeNames()){let g=t.getAttribute(u),c=n[l(u)];if(c)r[j](g,c)}return}))};class os extends i{#s=[];#r;mount(){this.#r=this.childNodes,this.style.display="inline flow";let s=this.getAttribute("value"),r=this.getHost()?.[e];if(s&&r){let t=b(r,s);this.#s.push(...$(this,r)),this.#s.push(...k(this,r)),this.#s.push(T(()=>{if(t.value===!0)this.append(...this.#r);else this.#r=Array.from(this.childNodes).map((n)=>this.removeChild(n))}))}}unmount(){for(let s of this.#s)s()}}class ns extends i{#s;mount(){this.style.display="inline flow";let s=this.getAttribute("value"),r=this.getHost()?.[e];if(s&&r){let t=b(r,s);this.#s=T(()=>{if(t.value)this.style.display="inline flow";else this.style.display="none"})}}unmount(){this.#s?.()}}class us extends i{#s=[];#r;#t;mount(){this.style.display="inline flow";let s=this.getAttribute("value"),r=this.getHost()?.[e];if(s&&r){this.#s.push(...$(this,r)),this.#s.push(...k(this,r));let[t,o]=this.children;this.#r=t,this.#t=o,this.innerHTML="";let n=b(r,s);this.#s.push(T(()=>{if(n.value===!0){if(this.firstChild)this.#t=this.removeChild(this.firstChild);this.append(this.#r)}else{if(this.firstChild)this.#r=this.removeChild(this.firstChild);this.append(this.#t)}}))}}unmount(){for(let s of this.#s)s()}}class es extends i{mount(){let s=this.getAttribute("is"),r=this.getHost()?.[e];if(s&&r)setTimeout(()=>{this.replaceWith(r[s].value)})}}class cs extends i{#s;get context(){return this.#s}mount(){this.style.display="none";let s=this.attachShadow({mode:"open"}),r=document[e];this.#s=new E;let t=this.getAttribute("name"),o,n=this.querySelector("template");for(let u of n.content.querySelectorAll("script"))if(u.setAttribute("type","javascript/blocked"),u.hasAttribute("on-mount"))o=S(this.#s,u.textContent);if(s.append(n.cloneNode(!0).content),!r.$store)r.$store={};r.$store[t]=this.#s,o?.()}}var xs=()=>{console.group("ph init"),!document[e]&&Object.defineProperty(document,e,{value:new E,writable:!1}),C("ph-signal",U),C("ph-computed",Y),C("ph-const",Z),C("ph-method",F),C("ph-for",_),C("ph-either",us),C("ph-show",ns),C("ph-if",os),C("ph-slot",V),C("ph-dynamic",es),C("ph-component",ss),C("ph-store",cs);let s=P(document.body);while(s.nextNode()){let r=s.currentNode;w(r)}ts(document.body),$(document.body,document[e]),rs(document.body),console.groupEnd()};window.init=xs;document.addEventListener("DOMContentLoaded",()=>{xs()});
