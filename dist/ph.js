var xs=Symbol.for("preact-signals");function Q(){if(!(k>1)){var s,t=!1;while(_!==void 0){var o=_;_=void 0,K++;while(o!==void 0){var n=o.o;if(o.o=void 0,o.f&=-3,!(8&o.f)&&is(o))try{o.c()}catch(r){if(!t)s=r,t=!0}o=n}}if(K=0,k--,t)throw s}else k--}var i=void 0;var _=void 0,k=0,K=0,X=0;function fs(s){if(i!==void 0){var t=s.n;if(t===void 0||t.t!==i){if(t={i:0,S:s,p:i.s,n:void 0,t:i,e:void 0,x:void 0,r:t},i.s!==void 0)i.s.n=t;if(i.s=t,s.n=t,32&i.f)s.S(t);return t}else if(t.i===-1){if(t.i=0,t.n!==void 0){if(t.n.p=t.p,t.p!==void 0)t.p.n=t.n;t.p=i.s,t.n=void 0,i.s.n=t,i.s=t}return t}}}function A(s){this.v=s,this.i=0,this.n=void 0,this.t=void 0}A.prototype.brand=xs;A.prototype.h=function(){return!0};A.prototype.S=function(s){if(this.t!==s&&s.e===void 0){if(s.x=this.t,this.t!==void 0)this.t.e=s;this.t=s}};A.prototype.U=function(s){if(this.t!==void 0){var{e:t,x:o}=s;if(t!==void 0)t.x=o,s.e=void 0;if(o!==void 0)o.e=t,s.x=void 0;if(s===this.t)this.t=o}};A.prototype.subscribe=function(s){var t=this;return a(function(){var o=t.value,n=i;i=void 0;try{s(o)}finally{i=n}})};A.prototype.valueOf=function(){return this.value};A.prototype.toString=function(){return this.value+""};A.prototype.toJSON=function(){return this.value};A.prototype.peek=function(){var s=i;i=void 0;try{return this.value}finally{i=s}};Object.defineProperty(A.prototype,"value",{get:function(){var s=fs(this);if(s!==void 0)s.i=this.i;return this.v},set:function(s){if(s!==this.v){if(K>100)throw new Error("Cycle detected");this.v=s,this.i++,X++,k++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{Q()}}}});function E(s){return new A(s)}function is(s){for(var t=s.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function gs(s){for(var t=s.s;t!==void 0;t=t.n){var o=t.S.n;if(o!==void 0)t.r=o;if(t.S.n=t,t.i=-1,t.n===void 0){s.s=t;break}}}function ps(s){var t=s.s,o=void 0;while(t!==void 0){var n=t.p;if(t.i===-1){if(t.S.U(t),n!==void 0)n.n=t.n;if(t.n!==void 0)t.n.p=n}else o=t;if(t.S.n=t.r,t.r!==void 0)t.r=void 0;t=n}s.s=o}function M(s){A.call(this,void 0),this.x=s,this.s=void 0,this.g=X-1,this.f=4}(M.prototype=new A).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32)return!0;if(this.f&=-5,this.g===X)return!0;if(this.g=X,this.f|=1,this.i>0&&!is(this))return this.f&=-2,!0;var s=i;try{gs(this),i=this;var t=this.x();if(16&this.f||this.v!==t||this.i===0)this.v=t,this.f&=-17,this.i++}catch(o){this.v=o,this.f|=16,this.i++}return i=s,ps(this),this.f&=-2,!0};M.prototype.S=function(s){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}A.prototype.S.call(this,s)};M.prototype.U=function(s){if(this.t!==void 0){if(A.prototype.U.call(this,s),this.t===void 0){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}}};M.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var s=this.t;s!==void 0;s=s.x)s.t.N()}};Object.defineProperty(M.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var s=fs(this);if(this.h(),s!==void 0)s.i=this.i;if(16&this.f)throw this.v;return this.v}});function as(s){return new M(s)}function Ts(s){var t=s.u;if(s.u=void 0,typeof t=="function"){k++;var o=i;i=void 0;try{t()}catch(n){throw s.f&=-2,s.f|=8,R(s),n}finally{i=o,Q()}}}function R(s){for(var t=s.s;t!==void 0;t=t.n)t.S.U(t);s.x=void 0,s.s=void 0,Ts(s)}function ds(s){if(i!==this)throw new Error("Out-of-order effect");if(ps(this),i=s,this.f&=-2,8&this.f)R(this);Q()}function L(s){this.x=s,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}L.prototype.c=function(){var s=this.S();try{if(8&this.f)return;if(this.x===void 0)return;var t=this.x();if(typeof t=="function")this.u=t}finally{s()}};L.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Ts(this),gs(this),k++;var s=i;return i=this,ds.bind(this,s)};L.prototype.N=function(){if(!(2&this.f))this.f|=2,this.o=_,_=this};L.prototype.d=function(){if(this.f|=8,!(1&this.f))R(this)};function a(s){var t=new L(s);try{t.c()}catch(o){throw t.d(),o}return t.d.bind(t)}class p extends HTMLElement{log(...s){let t=this.id?` #${this.id}`:"",o=this.getAttribute("name")?` :${this.getAttribute("name")}`:"";console.log(`[${this.tagName}${o}${t}]`,...s)}mount(){}unmount(){}connectedCallback(){this.mount()}disconnectedCallback(){this.unmount()}on(s,t){return this.addEventListener(s,t)}getHost(){let s=this.getRootNode();return s.host??s}emit(s,t){let o=!t?new Event(s):new CustomEvent(s,{detail:t});this.dispatchEvent(o)}}var Ss=(s,t)=>s.replace(/{{[^{}]*}}/g,(o)=>t(o.replace(/[{}]/g,""))),hs=document.createTreeWalker.bind(document),C=(s,t)=>!customElements.get(s)&&customElements.define(s,t),J=(s,t)=>{return Ss(s,(o)=>{let n=o.replace(/[{}]/g," ");if(t)n=t(n);return`<ph-slot value="${n}"></ph-slot>`})},v=(s,t)=>{return Function("context","computed",`with(context){return computed(() => ${t})}`)(s,as)},d=(s,t,o="")=>{let n=t??"",r=t?.includes("await");return Function("context",`return ${r?"async":""} function(${o}){with (context) {${n}}}`)(s)},m=(s)=>{return hs(s,NodeFilter.SHOW_ELEMENT,(t)=>t.tagName!=="TEMPLATE"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT)},q=(s,t)=>{return hs(s,NodeFilter.SHOW_ELEMENT,t)};var ys=({value:s,context:t})=>{try{return d(t,`return ${s}`)()}catch(o){console.error(o)}},G=(s)=>{let t=s.getHost()?.[u],o=s.getAttribute("name"),n=s.getAttribute("value");return{context:t,name:o,value:n}},u=Symbol(),z=Symbol(),bs=Symbol(),vs=Symbol(),H=Symbol();class W{static from(s){if(s instanceof W){let t=Object.create(s);return Object.defineProperty(t,"slots",{value:{default:E([])}}),t}return new W}slots={default:E([])};[z](s,t){Object.defineProperty(this,s,{get(){return t.value},set(o){t.value=o}})}[bs](s,t){Object.defineProperty(this,s,{get(){return t.value}})}[vs](s,t){Object.defineProperty(this,s,{value:t})}[H](s,t){Object.defineProperty(this,s,{value:t,writable:!1})}}class U extends p{mount(){let{context:s,name:t,value:o}=G(this);if(t&&o&&s){let n=ys({value:o,context:s});s[z](t,E(n));let r=this.getAttribute("local-storage");Os(r,t,s)}this.remove()}}class Y extends p{mount(){let{context:s,name:t,value:o}=G(this);if(t&&o&&s){let n=v(s,o);s[bs](t,n)}this.remove()}}class Z extends p{mount(){let{context:s,name:t,value:o}=G(this);if(t&&o&&s){let n=ys({value:o,context:s});s[H](t,n)}this.remove()}}class F extends p{mount(){this.style.display="none";let{context:s,name:t}=G(this),o=this.firstElementChild,r=o.getAttribute("args")?.split(",")?.map((f)=>{let[c,g]=f.split(":").map((h)=>h.trim());return{name:c,type:g}})?.map((f)=>f.name).join(","),e=o?.textContent.replace(/&gt;/g,">").replace(/&lt;/g,"<").trim()??"";if(s&&e){let f=d(s,e,r);s[vs](t,f)}else{if(!s)this.log("no context provided!");if(!e)this.log("no body provided!")}this.remove()}}function Os(s,t,o){if(s!==null){let r=(s?s+"/":"")+t,e=localStorage.getItem(r);if(e)o[t]=JSON.parse(e);a(()=>{localStorage.setItem(r,JSON.stringify(o[t]))})}}class V extends p{#s;mount(){setTimeout(()=>{this.style.display="contents";let s=this.getAttribute("value"),t=this.getHost()?.[u];if(s&&t){let o=v(t,s);this.#s=a(()=>{this.innerHTML=o.value})}})}unmount(){this.#s?.()}}function I(s){let t=q(s);while(t.nextNode())w(t.currentNode)}function $(s,t){let o=[],n=m(s);while(n.nextNode()){let r=n.currentNode;o.push(...N(r,t))}return o}function w(s){for(let t of s.getAttributeNames()){let o=t,n=As[o.slice(0,3)]?.(o)??As[o[0]]?.(o);if(n)s.setAttribute(n,s.getAttribute(o)),s.removeAttribute(o)}}var S={"bind:":"bind:","bool:":"bool:","on:":"on:","prop:":"prop:","spread:":"spread:"},As={"...":(s)=>s.replace("...","spread:"),"@":(s)=>s.replace("@","on:"),".":(s)=>s.replace(".","prop:"),"?":(s)=>s.replace("?","bool:"),":":(s)=>s.replace(":","bind:")};function N(s,t){let o=[],n=s.getAttributeNames();for(let r of n){let e=s.getAttribute(r);if(e&&e!==""){if(r.startsWith(S["on:"])){let c=r.replace(S["on:"],""),g=d(t,e,"$e");setTimeout(()=>{s.addEventListener(c,g)}),s.removeAttribute(r)}if(r.startsWith(S["bind:"])){let c=v(t,e),g=r.replace(S["bind:"],"");o.push(a(()=>{if(c.value!==void 0&&c.value!==null)s.setAttribute(g,c.value);else s.removeAttribute(g)})),s.removeAttribute(r)}if(r.startsWith(S["prop:"])){let c=r.replace(S["prop:"],""),g=v(t,e),h=s[u]??s;o.push(a(()=>{h[c]=g.value})),s.removeAttribute(r)}if(r.startsWith(S["spread:"])){let c=v(t,e);if(typeof c.value==="object")o.push(a(()=>{for(let[g,h]of Object.entries(c.value))s.dataset[g]=h})),s.removeAttribute(r);else throw Error(`the value of "${e}" is no object`);s.removeAttribute(r)}if(r.startsWith(S["bool:"])){let c=r.replace(S["bool:"],""),g=v(t,e);o.push(a(()=>{if(g.value)s.toggleAttribute(c,!0);else s.toggleAttribute(c,!1)})),s.removeAttribute(r)}if(r==="ref"){let c=e;t[H](c,s),s.removeAttribute(r)}}}return o}var $s=(s,t,o,n,r)=>{let e=s,f=(T)=>new RegExp(`([^a-zA-Z0-9$_]${T}[^a-zA-Z0-9$_:])`,"g"),c=(T)=>{let y=T.replace(f(o),(b)=>`${b[0]}${t}[${n}]?.valueOf()${b.at(-1)}`);if(r)return y.replace(f(r),(b)=>`${b[0]}${n}${b.at(-1)}`);return y},g=J(e.innerHTML,c);e.innerHTML=g;let h=(T)=>{for(let y of T.getAttributeNames())if(Object.keys(S).some((b)=>y.startsWith(b)))T.setAttribute(y,c(` ${T.getAttribute(y)} `))};h(e);let O=q(e);while(O.nextNode()){let T=O.currentNode;h(T);let y=T.tagName;if(T.hasAttribute("value")&&(y==="PH-IF"||y==="PH-EITHER"||y==="PH-SHOW"||y==="PH-SLOT"))T.setAttribute("value",c(` ${T.getAttribute("value")} `))}return e};class B extends p{mount(){this.style.display="contents";let s=this.firstElementChild;if(s?.tagName==="TEMPLATE")s.setAttribute("each",this.getAttribute("each")),B.fromTemplate(s);else throw Error("no template element provided")}static fromTemplate(s){I(s.content);let t=s.getAttribute("each"),[o,n]=t?.split(" in ")??[],[r,e]=o.split(",").map((h)=>h.trim()),f=s.getRootNode(),c=(f.host??f)[u],g=s.parentElement;if(c&&r&&n&&s){let h=v(c,n),O=0;a(()=>{let T=h.value.length;if(T!==O){if(T>O){let y=O;h.value.slice(y).forEach((b,P)=>{let x=s.content.firstElementChild.cloneNode(!0),D=$s(x,n,r,P+y,e),j=$(D,c);j.push(...N(D,c)),D.disposes=j,g.append(D)})}else{let y=Array.from(g.children).slice(T-O);for(let b of y){for(let P of b.disposes)P();b.remove()}g.remove}O=h.value.length}})}s.remove()}}var l=(s)=>s.replace(/-[a-z]/g,(t)=>t[1].toUpperCase());class ss extends p{mount(){let s=this.firstElementChild;if(s?.tagName==="TEMPLATE")Ds(s);else throw Error("no template element provided")}}function Ds(s){let t=s.getAttribute("tag"),o=s.getAttribute("open"),n=s.getAttribute("closed");if(!t)throw Error("no tag attribute was provided");let r=[];for(let f of s.content.querySelectorAll("attribute")){let c=f.getAttribute("name");if(c!=="null")r.push(c),f.remove()}let e=class extends p{#s;#t;#o=[];#r;get[u](){return this.#t}static observedAttributes=r;attributeChangedCallback(f,c,g){let h=l(f);if(this[u]&&c!==g)this[u][h]=g}constructor(){super();let f=n!==null?"closed":"open";this.#s=this.attachShadow({mode:f})}async mount(){if(!this[u]){let x=this.getHost()?.[u];this.#t=W.from(x),this[u][H]("self",this)}for(let x of r){let D=l(x);this[u][z](D,E(this.getAttribute(x))),this.#o.push(a(()=>{let j=this[u][D];if(j!==void 0&&j!==null)this.setAttribute(x,j);else this.removeAttribute(x)}))}let f=s.cloneNode(!0).content;I(f);let c=f.querySelector("script[on-mount]"),g=f.querySelector("script[on-remove]"),h=f.querySelectorAll("script[watch]"),O=c?d(this[u],c.textContent):void 0,T=g?d(this[u],g.textContent):void 0,y=Array.from(h).map((x)=>{let D=d(this[u],x.textContent);return x.remove(),D});this.#r=T,c?.remove(),g?.remove(),os(f);let b=this.#s;b.append(f),Es(this.#s,this[u]),ts(b),await Ws(b,this[u]),await O?.();let P=$(b,this[u]);this.#o.push(...P),Object.freeze(this[u]);for(let x of y)this.#o.push(a(()=>{x()}));Ns(b)}unmount(){this.#r?.();for(let f of this.#o)f()}};C(t,e)}function ts(s){for(let t of s.querySelectorAll("template[each]"))B.fromTemplate(t)}function os(s){let t=m(s);while(t.nextNode()){let o=t.currentNode;o.innerHTML=J(o.innerHTML)}}async function Ws(s,t){await Promise.all(Array.from(s.querySelectorAll("import[src]")).map(async(o)=>{let r=await import(o.getAttribute("src"));for(let e of o.getAttributeNames()){let f=o.getAttribute(e),c=r[l(e)];if(c)t[H](f,c)}return}))}function Es(s,t){let o=s.querySelector("slot"),n=s.querySelectorAll("slot[name]");for(let r of n){let e=r.getAttribute("name");t.slots[e]=E([])}s.onslotchange=()=>{t.slots.default.value=o?.assignedElements();for(let r of n){let e=r.getAttribute("name");if(t.slots)t.slots[e].value=r.assignedElements()}}}var Hs=(()=>{let s=null;return()=>{if(s===null)s=document.querySelector("style[global]");return s}})();function Ns(s){let t=s.querySelector("style"),o=new CSSStyleSheet,n=new CSSStyleSheet,r=new CSSStyleSheet;if(!t?.hasAttribute("isolated"))o.replaceSync(Hs()?.innerHTML??"");n.replaceSync(":host { display: inline-block; position: relative }"),r.replaceSync(t?.textContent??""),t?.remove(),s.adoptedStyleSheets.push(o,n,r)}class rs extends p{#s=[];#t;mount(){this.#t=this.childNodes,this.style.display="inline flow";let s=this.getAttribute("value"),t=this.getHost()?.[u];if(s&&t){let o=v(t,s);this.#s.push(...$(this,t)),this.#s.push(...N(this,t)),this.#s.push(a(()=>{if(o.value===!0)this.append(...this.#t);else this.#t=Array.from(this.childNodes).map((r)=>this.removeChild(r))}))}}unmount(){for(let s of this.#s)s()}}class ns extends p{#s;mount(){this.style.display="inline flow";let s=this.getAttribute("value"),t=this.getHost()?.[u];if(s&&t){let o=v(t,s);this.#s=a(()=>{if(o.value)this.style.display="inline flow";else this.style.display="none"})}}unmount(){this.#s?.()}}class es extends p{#s=[];#t;#o;mount(){this.style.display="inline flow";let s=this.getAttribute("value"),t=this.getHost()?.[u];if(s&&t){this.#s.push(...$(this,t)),this.#s.push(...N(this,t));let[o,n]=this.children;this.#t=o,this.#o=n,this.innerHTML="";let r=v(t,s);this.#s.push(a(()=>{if(r.value===!0){if(this.firstChild)this.#o=this.removeChild(this.firstChild);this.append(this.#t)}else{if(this.firstChild)this.#t=this.removeChild(this.firstChild);this.append(this.#o)}}))}}unmount(){for(let s of this.#s)s()}}class cs extends p{mount(){let s=this.getAttribute("is"),t=this.getHost()?.[u];if(s&&t)setTimeout(()=>{this.replaceWith(t[s].value)})}}class us extends p{#s;get context(){return this.#s}mount(){this.style.display="none";let s=this.attachShadow({mode:"open"}),t=document[u];this.#s=new W;let o=this.getAttribute("name"),n,r=this.querySelector("template");for(let e of r.content.querySelectorAll("script"))if(e.setAttribute("type","javascript/blocked"),e.hasAttribute("on-mount"))n=d(this.#s,e.textContent);if(s.append(r.cloneNode(!0).content),!t.$store)t.$store={};t.$store[o]=this.#s,n?.()}}var Cs=()=>{console.group("ph init"),!document[u]&&Object.defineProperty(document,u,{value:new W,writable:!1}),C("ph-signal",U),C("ph-computed",Y),C("ph-const",Z),C("ph-method",F),C("ph-for",B),C("ph-either",es),C("ph-show",ns),C("ph-if",rs),C("ph-slot",V),C("ph-dynamic",cs),C("ph-component",ss),C("ph-store",us);let s=m(document.body);while(s.nextNode()){let t=s.currentNode;w(t)}os(document.body),$(document.body,document[u]),ts(document.body),console.groupEnd()};window.init=Cs;document.addEventListener("DOMContentLoaded",()=>{Cs()});
